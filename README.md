# Быстрый старт: установка мастер-ноды и валидаторов wasmd

## 1. Клонирование репозитория

```bash
git clone [<ваш-репозиторий-с-скриптом>](https://github.com/kitay-sudo/wasmd-setup.git)
```

## 2. Запуск скрипта установки

```bash
chmod +x wasmd-setup.sh
./wasmd-setup.sh
```

## 3. Цикл установки мастер-ноды

1. **Клонировать репозиторий блокчейна**  
   Первый пункт меню клонирует репозиторий с исходным кодом блокчейна.
2. **Установить зависимости для сборки**  
   Второй пункт устанавливает все необходимые зависимости.
3. **Установить Bech32-префикс**  
   Третий пункт позволяет изменить префикс в Makefile перед сборкой.
4. **Собрать и установить блокчейн**  
   Четвёртый пункт собирает билд блокчейна.
5. **Инициализация узла**  
   Пятый пункт производит инициализацию узла и создаёт базовые конфигурационные файлы.
6. **Настроить конфигурацию wasmd**  
   Шестой пункт позволяет задать параметры сети, монеты, адреса и т.д.
7. **Создать ключ валидатора**  
   Седьмой пункт создаёт ключ валидатора.
8. **Добавить аккаунт в генезис**  
   Восьмой пункт добавляет любой аккаунт в genesis.json с балансом.
9. **Собрать gentx и создать валидатора**  
   Девятый пункт собирает gentx и создаёт валидатора.
10. **Показать ID ноды**  
   Десятый пункт выводит ID вашей ноды для обмена с другими участниками.

На этом настройка мастер-ноды завершена.

---

## 4. Настройка следующих валидаторов

1. **Клонируйте данный репозиторий**
2. **Запустите скрипт wasmd-setup.sh**
3. **Пройдите пункты меню с 1 по 6 включительно**
4. **Создайте кошелёк (пункт 17), введите имя, например, validator2**
5. **Отправьте средства с аккаунта мастер-ноды на валидатора** (через пункт 16 или вручную)
6. **Создайте валидатора:**

```bash
wasmd tx staking create-validator \
  --amount 5000000000000ufzp \
  --pubkey "$(wasmd tendermint show-validator)" \
  --moniker "node002" \
  --chain-id fzp \
  --from validator2 \
  --commission-rate "0.10" \
  --commission-max-rate "0.20" \
  --commission-max-change-rate "0.01" \
  --min-self-delegation "1"
```

Проверить валидаторов:
```bash
wasmd query staking validators
```

---

## 5. Обмен ключами и запуск сети

1. **На всех нодах получите ID (пункт 10 меню)**
2. **На мастер-ноде выполните пункт 14 (persistent_peers)**
3. **Полученную строку вставьте в config.toml на всех нодах в параметр persistent_peers**
4. **Запустите ноды на всех серверах (через systemd или вручную)**

---

## Примечания
- Все действия выполняются через удобное меню скрипта wasmd-setup.sh
- Для копирования genesis.json на другие ноды используйте соответствующий пункт меню
- Для отправки монет используйте пункт 16 меню
